var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(t){return null==t?"":t}function i(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function a(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function p(){return d(" ")}function h(){return d("")}function g(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function v(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function y(t,e,n,o){t.style.setProperty(e,n,o?"important":"")}let $;function x(t){$=t}function w(){if(!$)throw new Error("Function called outside component initialization");return $}function b(t){w().$$.on_mount.push(t)}function k(){const t=w();return(e,n)=>{const o=t.$$.callbacks[e];if(o){const r=function(t,e,n=!1){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,!1,e),o}(e,n);o.slice().forEach((e=>{e.call(t,r)}))}}}const _=[],E=[],T=[],L=[],q=Promise.resolve();let C=!1;function A(t){T.push(t)}let D=!1;const P=new Set;function N(){if(!D){D=!0;do{for(let t=0;t<_.length;t+=1){const e=_[t];x(e),Y(e.$$)}for(x(null),_.length=0;E.length;)E.pop()();for(let t=0;t<T.length;t+=1){const e=T[t];P.has(e)||(P.add(e),e())}T.length=0}while(_.length);for(;L.length;)L.pop()();C=!1,D=!1,P.clear()}}function Y(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(A)}}const H=new Set;let M;function S(t,e){t&&t.i&&(H.delete(t),t.i(e))}function X(t,e,n,o){if(t&&t.o){if(H.has(t))return;H.add(t),M.c.push((()=>{H.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function I(t){t&&t.c()}function O(t,n,l,s){const{fragment:i,on_mount:c,on_destroy:u,after_update:a}=t.$$;i&&i.m(n,l),s||A((()=>{const n=c.map(e).filter(r);u?u.push(...n):o(n),t.$$.on_mount=[]})),a.forEach(A)}function j(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function W(t,e){-1===t.$$.dirty[0]&&(_.push(t),C||(C=!0,q.then(N)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function z(e,r,l,s,i,c,a,f=[-1]){const d=$;x(e);const p=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:i,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:r.context||[]),callbacks:n(),dirty:f,skip_bound:!1,root:r.target||d.$$.root};a&&a(p.root);let h=!1;if(p.ctx=l?l(e,r.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return p.ctx&&i(p.ctx[t],p.ctx[t]=r)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](r),h&&W(e,t)),n})):[],p.update(),h=!0,o(p.before_update),p.fragment=!!s&&s(p.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);p.fragment&&p.fragment.l(t),t.forEach(u)}else p.fragment&&p.fragment.c();r.intro&&S(e.$$.fragment),O(e,r.target,r.anchor,r.customElement),N()}x(d)}class B{$destroy(){j(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function F(t,e,n){const o=t.slice();return o[5]=e[n].name,o[6]=e[n].method,o[8]=n,o}function G(t,e,n){const o=t.slice();return o[2]=e[n],o}function J(t){let e,n=t[0],o=[];for(let e=0;e<n.length;e+=1)o[e]=Q(F(t,n,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=h()},m(t,n){for(let e=0;e<o.length;e+=1)o[e].m(t,n);c(t,e,n)},p(t,r){if(1&r){let l;for(n=t[0],l=0;l<n.length;l+=1){const s=F(t,n,l);o[l]?o[l].p(s,r):(o[l]=Q(s),o[l].c(),o[l].m(e.parentNode,e))}for(;l<o.length;l+=1)o[l].d(1);o.length=n.length}},d(t){a(o,t),t&&u(e)}}}function K(t){let e,n=t[0],o=[];for(let e=0;e<n.length;e+=1)o[e]=R(G(t,n,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=h()},m(t,n){for(let e=0;e<o.length;e+=1)o[e].m(t,n);c(t,e,n)},p(t,r){if(1&r){let l;for(n=t[0],l=0;l<n.length;l+=1){const s=G(t,n,l);o[l]?o[l].p(s,r):(o[l]=R(s),o[l].c(),o[l].m(e.parentNode,e))}for(;l<o.length;l+=1)o[l].d(1);o.length=n.length}},d(t){a(o,t),t&&u(e)}}}function Q(t){let e,n,o,l,a,h,y=t[5]+"";return{c(){e=f("li"),n=d(y),o=p(),m(e,"class",l=s(window.opener||1!=t[8]?"":"hide")+" svelte-1vchlcb")},m(l,s){c(l,e,s),i(e,n),i(e,o),a||(h=g(e,"mousedown",(function(){r(t[6])&&t[6].apply(this,arguments)})),a=!0)},p(e,o){t=e,1&o&&y!==(y=t[5]+"")&&v(n,y)},d(t){t&&u(e),a=!1,h()}}}function R(t){let e,n,o,r,l,s=t[2]+"";return{c(){e=f("li"),n=d(s),o=p(),m(e,"draggable","true"),m(e,"class","svelte-1vchlcb")},m(t,s){c(t,e,s),i(e,n),i(e,o),r||(l=g(e,"dragstart",V),r=!0)},p(t,e){1&e&&s!==(s=t[2]+"")&&v(n,s)},d(t){t&&u(e),r=!1,l()}}}function U(e){let n,o,r;function l(t,e){return"pallet"==t[1]?K:"window"==t[1]?J:void 0}let a=l(e),d=a&&a(e);return{c(){n=f("div"),o=f("ul"),d&&d.c(),m(o,"class","menu svelte-1vchlcb"),m(n,"class",r=s(e[1])+" svelte-1vchlcb")},m(t,e){c(t,n,e),i(n,o),d&&d.m(o,null)},p(t,[e]){a===(a=l(t))&&d?d.p(t,e):(d&&d.d(1),d=a&&a(t),d&&(d.c(),d.m(o,null))),2&e&&r!==(r=s(t[1])+" svelte-1vchlcb")&&m(n,"class",r)},i:t,o:t,d(t){t&&u(n),d&&d.d()}}}function V(t){t.dataTransfer.setData("nodeName",t.target.innerText)}function Z(t,e,n){let{aProps:o=[]}=e,{sType:r=""}=e;return t.$$set=t=>{"aProps"in t&&n(0,o=t.aProps),"sType"in t&&n(1,r=t.sType)},[o,r]}class tt extends B{constructor(t){super(),z(this,t,Z,U,l,{aProps:0,sType:1})}}function et(t,e,n){const o=t.slice();return o[12]=e[n],o}function nt(e){let n,r,l;return{c(){n=f("li"),n.innerHTML='output\n                    <div class="nodeLines svelte-1hvyi6k"></div> \n                ',m(n,"draggable","true"),m(n,"class","svelte-1hvyi6k")},m(t,o){c(t,n,o),r||(l=[g(n,"dragend",rt),g(n,"dragstart",e[3]),g(n,"drag",e[4])],r=!0)},p:t,d(t){t&&u(n),r=!1,o(l)}}}function ot(e){let n,r,l,s,h,$,x,w,b,k,_,E,T,L=Array(1),q=[];for(let t=0;t<L.length;t+=1)q[t]=nt(et(e,L,t));return{c(){n=f("div"),r=f("span"),l=d(e[1]),s=p(),h=f("div"),$=p(),x=f("div"),w=f("ul"),b=f("li"),b.textContent="input",k=p(),_=f("ul");for(let t=0;t<q.length;t+=1)q[t].c();m(r,"class","head svelte-1hvyi6k"),m(r,"draggable","true"),y(h,"box-sizing","border-box"),y(h,"width","100%"),y(h,"height","100%"),y(h,"top","0px"),y(h,"position","absolute"),m(b,"draggable","true"),m(b,"class","svelte-1hvyi6k"),m(w,"class","input svelte-1hvyi6k"),m(_,"class","output svelte-1hvyi6k"),m(x,"class","sockets svelte-1hvyi6k"),m(n,"class","node svelte-1hvyi6k")},m(t,o){c(t,n,o),i(n,r),i(r,l),i(n,s),i(n,h),i(n,$),i(n,x),i(x,w),i(w,b),i(x,k),i(x,_);for(let t=0;t<q.length;t+=1)q[t].m(_,null);e[8](n),E||(T=[g(r,"dragend",rt),g(r,"pointerdown",e[2]),g(h,"pointerdown",e[2]),g(b,"dragend",rt),g(b,"dragstart",e[3]),g(b,"drag",lt)],E=!0)},p(t,[e]){if(2&e&&v(l,t[1]),24&e){let n;for(L=Array(1),n=0;n<L.length;n+=1){const o=et(t,L,n);q[n]?q[n].p(o,e):(q[n]=nt(o),q[n].c(),q[n].m(_,null))}for(;n<q.length;n+=1)q[n].d(1);q.length=L.length}},i:t,o:t,d(t){t&&u(n),a(q,t),e[8](null),E=!1,o(T)}}}function rt(t){t.preventDefault(),this.style.opacity="1"}function lt(t){}function st(t,e,n){let{nodeTitle:o}=e,{pos:r}=e,{center:l=!1}=e;const s=k();let i,c="",u={x:0,y:0},a={x:0,y:0};return b((()=>{if(o.includes("create")){const t=o.slice(6,o.length);n(1,c=t)}else n(1,c=o);new AudioContext;let t=i.offsetWidth,e=i.offsetHeight;l&&(a.x=t/2,a.y=e/2),n(0,i.style.left=r.x-a.x+"px",i),n(0,i.style.top=r.y-a.y+"px",i)})),t.$$set=t=>{"nodeTitle"in t&&n(5,o=t.nodeTitle),"pos"in t&&n(6,r=t.pos),"center"in t&&n(7,l=t.center)},[i,c,function(t){let e=t.path[1];parseInt(e.style.left),parseInt(e.style.top),s("nodeMove",{el:i})},function(t){s("nodeSocket",{el:i}),u.x=t.offsetX,u.y=t.offsetY},function(t){document.querySelector(".nodeLines"),t.offsetY,u.y,t.offsetX,u.x},o,r,l,function(t){E[t?"unshift":"push"]((()=>{i=t,n(0,i)}))}]}class it extends B{constructor(t){super(),z(this,t,st,ot,l,{nodeTitle:5,pos:6,center:7})}}function ct(t,e,n){const o=t.slice();return o[16]=e[n].name,o[17]=e[n].x,o[18]=e[n].y,o[19]=e[n].center,o}function ut(t){let e,n;return e=new it({props:{center:t[19],nodeTitle:t[16],pos:{x:t[17],y:t[18]}}}),e.$on("nodeSocket",pt),e.$on("nodeMove",t[8]),{c(){I(e.$$.fragment)},m(t,o){O(e,t,o),n=!0},p(t,n){const o={};1&n&&(o.center=t[19]),1&n&&(o.nodeTitle=t[16]),1&n&&(o.pos={x:t[17],y:t[18]}),e.$set(o)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){X(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function at(t){let e,n,r,l,d,h,v,y,$,x,w,b,k,_,E,T,L;r=new tt({props:{sType:"window",aProps:t[3]}}),h=new tt({props:{sType:"pallet",aProps:t[4]}});let q=t[0],C=[];for(let e=0;e<q.length;e+=1)C[e]=ut(ct(t,q,e));const A=t=>X(C[t],1,1,(()=>{C[t]=null}));return{c(){e=f("div"),n=f("div"),I(r.$$.fragment),l=p(),d=f("div"),I(h.$$.fragment),v=p(),y=f("div"),$=f("div"),w=p(),b=f("div");for(let t=0;t<C.length;t+=1)C[t].c();k=p(),_=f("div"),_.innerHTML="<div></div>",m(n,"class","top svelte-3eq8yl"),m($,"class",x=s(t[1]?"eventContainer":"")+" svelte-3eq8yl"),m(b,"class","innerContainer svelte-3eq8yl"),m(y,"class","container svelte-3eq8yl"),m(d,"class","mid svelte-3eq8yl"),m(_,"class","bot svelte-3eq8yl"),m(e,"class","panel svelte-3eq8yl")},m(o,s){c(o,e,s),i(e,n),O(r,n,null),i(e,l),i(e,d),O(h,d,null),i(d,v),i(d,y),i(y,$),i(y,w),i(y,b);for(let t=0;t<C.length;t+=1)C[t].m(b,null);t[9](b),i(e,k),i(e,_),E=!0,T||(L=[g($,"pointermove",t[6]),g($,"pointerup",t[7]),g(y,"drop",t[5])],T=!0)},p(t,[e]){if((!E||2&e&&x!==(x=s(t[1]?"eventContainer":"")+" svelte-3eq8yl"))&&m($,"class",x),257&e){let n;for(q=t[0],n=0;n<q.length;n+=1){const o=ct(t,q,n);C[n]?(C[n].p(o,e),S(C[n],1)):(C[n]=ut(o),C[n].c(),S(C[n],1),C[n].m(b,null))}for(M={r:0,c:[],p:M},n=q.length;n<C.length;n+=1)A(n);M.r||o(M.c),M=M.p}},i(t){if(!E){S(r.$$.fragment,t),S(h.$$.fragment,t);for(let t=0;t<q.length;t+=1)S(C[t]);E=!0}},o(t){X(r.$$.fragment,t),X(h.$$.fragment,t),C=C.filter(Boolean);for(let t=0;t<C.length;t+=1)X(C[t]);E=!1},d(n){n&&u(e),j(r),j(h),a(C,n),t[9](null),T=!1,o(L)}}}function ft(){let t=window.innerWidth,e=window.innerHeight;window.open(window.location.href,"","width="+t+",height="+e+",fullscreen=true")}function dt(){window.close()}function pt(t){}function ht(t,e,n){let o,r=[{name:"break window",method:ft},{name:"close window",method:dt}],l=[{name:"createMediaElementSource",x:0,y:0,center:!1}],s=[],i=!1,c={start:!1,points:[]},u=null,a={x:0,y:0};for(let t in AudioContext.prototype)s.push(t);return b((()=>{let t=1,e=0,n=0;o.addEventListener("pointerdown",(t=>{0==t.button&&(a.x=t.offsetX,a.y=t.offsetY,console.log(a)),1==t.button&&(i=!0)})),o.addEventListener("mousemove",(t=>{var r,l;i&&(e+=t.movementX,n+=t.movementY,r=e,l=n,o.style.transform="translate("+r+"px, "+l+"px)")})),o.addEventListener("mouseup",(t=>{i&&(i=!1)})),o.addEventListener("wheel",(e=>{t>0?t-=e.deltaY/1e3:t=.01,function(t){let e=o;e.style.transformOrigin=e.offsetWidth/2+"px "+(e.offsetHeight/2+window.innerHeight/2)+"px",e.style.transform="scale("+t+")"}(t)}))})),[l,u,o,r,s,function(t){let e=t.dataTransfer.getData("nodeName");console.log(t),e&&n(0,l=[...l,{name:e,x:t.layerX,y:t.layerY,center:!0}]),n(1,u=null),t.preventDefault()},function(t){let e=t.offsetX-a.x,o=t.offsetY-a.y;c.start&&console.log(t),u&&(n(1,u.style.left=`${e}px`,u),n(1,u.style.top=`${o}px`,u)),t.preventDefault()},function(){n(1,u=null),c.start=!1,c.points=[]},function(t){n(1,u=t.detail.el),console.log(u),parseInt(u.style.left),parseInt(u.style.top)},function(t){E[t?"unshift":"push"]((()=>{o=t,n(2,o)}))}]}class gt extends B{constructor(t){super(),z(this,t,ht,at,l,{})}}function mt(e){let n,r,l,s,i;return r=new gt({}),{c(){n=f("main"),I(r.$$.fragment),m(n,"id","main"),m(n,"class","svelte-1an40wo")},m(t,e){c(t,n,e),O(r,n,null),l=!0,s||(i=[g(n,"drop",vt),g(n,"dragover",yt)],s=!0)},p:t,i(t){l||(S(r.$$.fragment,t),l=!0)},o(t){X(r.$$.fragment,t),l=!1},d(t){t&&u(n),j(r),s=!1,o(i)}}}function vt(t){t.preventDefault()}function yt(t){t.preventDefault()}function $t(t){return b((()=>{document.addEventListener("contextmenu",(t=>(t.preventDefault(),!1)))})),[]}return new class extends B{constructor(t){super(),z(this,t,$t,mt,l,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
