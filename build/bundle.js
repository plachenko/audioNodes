var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function o(e){e.forEach(t)}function r(e){return"function"==typeof e}function l(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function s(e){return null==e?"":e}function i(e,t){e.appendChild(t)}function c(e,t,n){e.insertBefore(t,n||null)}function a(e){e.parentNode.removeChild(e)}function u(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function f(e){return document.createElement(e)}function d(e){return document.createTextNode(e)}function p(){return d(" ")}function h(){return d("")}function g(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function m(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function y(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function $(e,t,n,o){e.style.setProperty(t,n,o?"important":"")}let v;function x(e){v=e}function b(){if(!v)throw new Error("Function called outside component initialization");return v}function w(e){b().$$.on_mount.push(e)}function T(){const e=b();return(t,n)=>{const o=e.$$.callbacks[t];if(o){const r=function(e,t,n=!1){const o=document.createEvent("CustomEvent");return o.initCustomEvent(e,n,!1,t),o}(t,n);o.slice().forEach((t=>{t.call(e,r)}))}}}const E=[],_=[],z=[],k=[],j=Promise.resolve();let C=!1;function L(e){z.push(e)}let A=!1;const D=new Set;function P(){if(!A){A=!0;do{for(let e=0;e<E.length;e+=1){const t=E[e];x(t),M(t.$$)}for(x(null),E.length=0;_.length;)_.pop()();for(let e=0;e<z.length;e+=1){const t=z[e];D.has(t)||(D.add(t),t())}z.length=0}while(E.length);for(;k.length;)k.pop()();C=!1,A=!1,D.clear()}}function M(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(L)}}const N=new Set;let S;function Y(e,t){e&&e.i&&(N.delete(e),e.i(t))}function H(e,t,n,o){if(e&&e.o){if(N.has(e))return;N.add(e),S.c.push((()=>{N.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}}function X(e){e&&e.c()}function O(e,n,l,s){const{fragment:i,on_mount:c,on_destroy:a,after_update:u}=e.$$;i&&i.m(n,l),s||L((()=>{const n=c.map(t).filter(r);a?a.push(...n):o(n),e.$$.on_mount=[]})),u.forEach(L)}function q(e,t){const n=e.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function I(e,t){-1===e.$$.dirty[0]&&(E.push(e),C||(C=!0,j.then(P)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function W(t,r,l,s,i,c,u,f=[-1]){const d=v;x(t);const p=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:i,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:r.context||[]),callbacks:n(),dirty:f,skip_bound:!1,root:r.target||d.$$.root};u&&u(p.root);let h=!1;if(p.ctx=l?l(t,r.props||{},((e,n,...o)=>{const r=o.length?o[0]:n;return p.ctx&&i(p.ctx[e],p.ctx[e]=r)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](r),h&&I(t,e)),n})):[],p.update(),h=!0,o(p.before_update),p.fragment=!!s&&s(p.ctx),r.target){if(r.hydrate){const e=function(e){return Array.from(e.childNodes)}(r.target);p.fragment&&p.fragment.l(e),e.forEach(a)}else p.fragment&&p.fragment.c();r.intro&&Y(t.$$.fragment),O(t,r.target,r.anchor,r.customElement),P()}x(d)}class B{$destroy(){q(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function F(e,t,n){const o=e.slice();return o[5]=t[n].name,o[6]=t[n].method,o[8]=n,o}function R(e,t,n){const o=e.slice();return o[2]=t[n],o}function G(e){let t,n=e[0],o=[];for(let t=0;t<n.length;t+=1)o[t]=K(F(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=h()},m(e,n){for(let t=0;t<o.length;t+=1)o[t].m(e,n);c(e,t,n)},p(e,r){if(1&r){let l;for(n=e[0],l=0;l<n.length;l+=1){const s=F(e,n,l);o[l]?o[l].p(s,r):(o[l]=K(s),o[l].c(),o[l].m(t.parentNode,t))}for(;l<o.length;l+=1)o[l].d(1);o.length=n.length}},d(e){u(o,e),e&&a(t)}}}function J(e){let t,n=e[0],o=[];for(let t=0;t<n.length;t+=1)o[t]=Q(R(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=h()},m(e,n){for(let t=0;t<o.length;t+=1)o[t].m(e,n);c(e,t,n)},p(e,r){if(1&r){let l;for(n=e[0],l=0;l<n.length;l+=1){const s=R(e,n,l);o[l]?o[l].p(s,r):(o[l]=Q(s),o[l].c(),o[l].m(t.parentNode,t))}for(;l<o.length;l+=1)o[l].d(1);o.length=n.length}},d(e){u(o,e),e&&a(t)}}}function K(e){let t,n,o,l,u,h,$=e[5]+"";return{c(){t=f("li"),n=d($),o=p(),m(t,"class",l=s(window.opener||1!=e[8]?"":"hide")+" svelte-1vchlcb")},m(l,s){c(l,t,s),i(t,n),i(t,o),u||(h=g(t,"mousedown",(function(){r(e[6])&&e[6].apply(this,arguments)})),u=!0)},p(t,o){e=t,1&o&&$!==($=e[5]+"")&&y(n,$)},d(e){e&&a(t),u=!1,h()}}}function Q(e){let t,n,o,r,l,s=e[2]+"";return{c(){t=f("li"),n=d(s),o=p(),m(t,"draggable","true"),m(t,"class","svelte-1vchlcb")},m(e,s){c(e,t,s),i(t,n),i(t,o),r||(l=g(t,"dragstart",V),r=!0)},p(e,t){1&t&&s!==(s=e[2]+"")&&y(n,s)},d(e){e&&a(t),r=!1,l()}}}function U(t){let n,o,r;function l(e,t){return"pallet"==e[1]?J:"window"==e[1]?G:void 0}let u=l(t),d=u&&u(t);return{c(){n=f("div"),o=f("ul"),d&&d.c(),m(o,"class","menu svelte-1vchlcb"),m(n,"class",r=s(t[1])+" svelte-1vchlcb")},m(e,t){c(e,n,t),i(n,o),d&&d.m(o,null)},p(e,[t]){u===(u=l(e))&&d?d.p(e,t):(d&&d.d(1),d=u&&u(e),d&&(d.c(),d.m(o,null))),2&t&&r!==(r=s(e[1])+" svelte-1vchlcb")&&m(n,"class",r)},i:e,o:e,d(e){e&&a(n),d&&d.d()}}}function V(e){e.dataTransfer.setData("nodeName",e.target.innerText)}function Z(e,t,n){let{aProps:o=[]}=t,{sType:r=""}=t;return e.$$set=e=>{"aProps"in e&&n(0,o=e.aProps),"sType"in e&&n(1,r=e.sType)},[o,r]}class ee extends B{constructor(e){super(),W(this,e,Z,U,l,{aProps:0,sType:1})}}function te(e,t,n){const o=e.slice();return o[12]=t[n],o}function ne(t){let n,r,l;return{c(){n=f("li"),n.innerHTML='output\n                    <div class="nodeLines svelte-1xajfyz"></div> \n                ',m(n,"draggable","true"),m(n,"class","svelte-1xajfyz")},m(e,o){c(e,n,o),r||(l=[g(n,"dragend",re),g(n,"dragstart",t[3]),g(n,"drag",t[4])],r=!0)},p:e,d(e){e&&a(n),r=!1,o(l)}}}function oe(t){let n,r,l,s,h,v,x,b,w,T,E,_,z,k,j,C=Array(1),L=[];for(let e=0;e<C.length;e+=1)L[e]=ne(te(t,C,e));return{c(){n=f("div"),r=f("span"),l=d(t[1]),s=p(),h=f("div"),v=p(),x=f("div"),b=f("ul"),w=f("li"),w.textContent="input",T=p(),E=f("div"),_=p(),z=f("ul");for(let e=0;e<L.length;e+=1)L[e].c();m(r,"class","head svelte-1xajfyz"),m(r,"draggable","true"),$(h,"box-sizing","border-box"),$(h,"width","100%"),$(h,"height","100%"),$(h,"top","0px"),$(h,"position","absolute"),m(w,"draggable","true"),m(w,"class","svelte-1xajfyz"),m(E,"class","nodeLines svelte-1xajfyz"),m(b,"class","input svelte-1xajfyz"),m(z,"class","output svelte-1xajfyz"),m(x,"class","sockets svelte-1xajfyz"),m(n,"class","node svelte-1xajfyz")},m(e,o){c(e,n,o),i(n,r),i(r,l),i(n,s),i(n,h),i(n,v),i(n,x),i(x,b),i(b,w),i(b,T),i(b,E),i(x,_),i(x,z);for(let e=0;e<L.length;e+=1)L[e].m(z,null);t[8](n),k||(j=[g(r,"dragend",re),g(r,"pointerdown",t[2]),g(h,"pointerdown",t[2]),g(w,"dragend",re),g(w,"dragstart",t[3]),g(w,"drag",le)],k=!0)},p(e,[t]){if(2&t&&y(l,e[1]),24&t){let n;for(C=Array(1),n=0;n<C.length;n+=1){const o=te(e,C,n);L[n]?L[n].p(o,t):(L[n]=ne(o),L[n].c(),L[n].m(z,null))}for(;n<L.length;n+=1)L[n].d(1);L.length=C.length}},i:e,o:e,d(e){e&&a(n),u(L,e),t[8](null),k=!1,o(j)}}}function re(e){e.preventDefault(),this.style.opacity="1"}function le(e){}function se(e,t,n){let{nodeTitle:o}=t,{pos:r}=t,{center:l=!1}=t;const s=T();let i,c="",a={x:0,y:0},u={x:0,y:0};return w((()=>{if(o.includes("create")){const e=o.slice(6,o.length);n(1,c=e)}else n(1,c=o);new AudioContext;let e=i.offsetWidth,t=i.offsetHeight;l&&(u.x=e/2,u.y=t/2),n(0,i.style.left=r.x-u.x+"px",i),n(0,i.style.top=r.y-u.y+"px",i)})),e.$$set=e=>{"nodeTitle"in e&&n(5,o=e.nodeTitle),"pos"in e&&n(6,r=e.pos),"center"in e&&n(7,l=e.center)},[i,c,function(e){let t=e.path[1];parseInt(t.style.left),parseInt(t.style.top),s("nodeMove",{el:i})},function(e){s("nodeSocket",{el:i}),a.x=e.offsetX,a.y=e.offsetY},function(e){document.querySelector(".nodeLines"),e.offsetY,a.y,e.offsetX,a.x},o,r,l,function(e){_[e?"unshift":"push"]((()=>{i=e,n(0,i)}))}]}class ie extends B{constructor(e){super(),W(this,e,se,oe,l,{nodeTitle:5,pos:6,center:7})}}function ce(e,t,n){const o=e.slice();return o[20]=t[n],o[22]=n,o}function ae(e,t,n){const o=e.slice();return o[23]=t[n].name,o[24]=t[n].x,o[25]=t[n].y,o[26]=t[n].center,o}function ue(e){let t,n;return t=new ie({props:{center:e[26],nodeTitle:e[23],pos:{x:e[24],y:e[25]}}}),t.$on("nodeSocket",ge),t.$on("nodeMove",e[10]),{c(){X(t.$$.fragment)},m(e,o){O(t,e,o),n=!0},p(e,n){const o={};2&n&&(o.center=e[26]),2&n&&(o.nodeTitle=e[23]),2&n&&(o.pos={x:e[24],y:e[25]}),t.$set(o)},i(e){n||(Y(t.$$.fragment,e),n=!0)},o(e){H(t.$$.fragment,e),n=!1},d(e){q(t,e)}}}function fe(t){let n,o,r;return{c(){n=f("div"),m(n,"class",o=(t[22]>1?"panelCol":"panelRow")+" panelControl svelte-b7ayey"),m(n,"style",r=t[6][t[22]]+": 0px")},m(e,t){c(e,n,t)},p:e,d(e){e&&a(n)}}}function de(e){let t,n,r,l,d,h,y,$,v,x,b,w,T,E,_,z,k,j,C;r=new ee({props:{sType:"window",aProps:e[4]}}),h=new ee({props:{sType:"pallet",aProps:e[5]}});let L=e[1],A=[];for(let t=0;t<L.length;t+=1)A[t]=ue(ae(e,L,t));const D=e=>H(A[e],1,1,(()=>{A[e]=null}));let P=e[6],M=[];for(let t=0;t<P.length;t+=1)M[t]=fe(ce(e,P,t));return{c(){t=f("div"),n=f("div"),X(r.$$.fragment),l=p(),d=f("div"),X(h.$$.fragment),y=p(),$=f("div"),v=f("div"),b=p(),w=f("div");for(let e=0;e<A.length;e+=1)A[e].c();T=p(),E=f("div"),E.innerHTML="<div></div>",_=p();for(let e=0;e<M.length;e+=1)M[e].c();m(n,"class","top svelte-b7ayey"),m(v,"class",x=s(e[2]?"eventContainer":"")+" svelte-b7ayey"),m(w,"class","innerContainer svelte-b7ayey"),m($,"class","container svelte-b7ayey"),m(d,"class","mid svelte-b7ayey"),m(E,"class","bot svelte-b7ayey"),m(t,"class","panel svelte-b7ayey"),m(t,"style",z="flex: 0 0"+{size:e[0]})},m(o,s){c(o,t,s),i(t,n),O(r,n,null),i(t,l),i(t,d),O(h,d,null),i(d,y),i(d,$),i($,v),i($,b),i($,w);for(let e=0;e<A.length;e+=1)A[e].m(w,null);e[13](w),i(t,T),i(t,E),i(t,_);for(let e=0;e<M.length;e+=1)M[e].m(t,null);k=!0,j||(C=[g(v,"pointermove",e[7]),g(v,"pointerup",e[9]),g($,"drop",e[8])],j=!0)},p(e,[n]){if((!k||4&n&&x!==(x=s(e[2]?"eventContainer":"")+" svelte-b7ayey"))&&m(v,"class",x),1026&n){let t;for(L=e[1],t=0;t<L.length;t+=1){const o=ae(e,L,t);A[t]?(A[t].p(o,n),Y(A[t],1)):(A[t]=ue(o),A[t].c(),Y(A[t],1),A[t].m(w,null))}for(S={r:0,c:[],p:S},t=L.length;t<A.length;t+=1)D(t);S.r||o(S.c),S=S.p}if(64&n){let o;for(P=e[6],o=0;o<P.length;o+=1){const r=ce(e,P,o);M[o]?M[o].p(r,n):(M[o]=fe(r),M[o].c(),M[o].m(t,null))}for(;o<M.length;o+=1)M[o].d(1);M.length=P.length}(!k||1&n&&z!==(z="flex: 0 0"+{size:e[0]}))&&m(t,"style",z)},i(e){if(!k){Y(r.$$.fragment,e),Y(h.$$.fragment,e);for(let e=0;e<L.length;e+=1)Y(A[e]);k=!0}},o(e){H(r.$$.fragment,e),H(h.$$.fragment,e),A=A.filter(Boolean);for(let e=0;e<A.length;e+=1)H(A[e]);k=!1},d(n){n&&a(t),q(r),q(h),u(A,n),e[13](null),u(M,n),j=!1,o(C)}}}function pe(){let e=window.innerWidth,t=window.innerHeight;window.open(window.location.href,"","width="+e+",height="+t+",fullscreen=true")}function he(){window.close()}function ge(e){}function me(e,t,n){let{size:o=0}=t,r=[{name:"break window",method:pe},{name:"close window",method:he}],l=[{name:"createMediaElementSource",x:0,y:0,center:!1},{name:"createMediaElementSource",x:600,y:300,center:!1}],s=[],i=!1,c={start:!1,points:[]},{type:a=0}=t;let u,f=null,d={x:0,y:0};for(let e in AudioContext.prototype)s.push(e);return w((()=>{let e=1,t=0,n=0;u.addEventListener("pointerdown",(e=>{0==e.button&&(d.x=e.offsetX,d.y=e.offsetY),1==e.button&&(i=!0)})),u.addEventListener("mousemove",(e=>{var o,r;i&&(t+=e.movementX,n+=e.movementY,o=t,r=n,u.style.transform="translate("+o+"px, "+r+"px)")})),u.addEventListener("mouseup",(e=>{i&&(i=!1)})),u.addEventListener("wheel",(t=>{e>0?e-=t.deltaY/1e3:e=.01,function(e){let t=u;t.style.transformOrigin=t.offsetWidth/2+"px "+(t.offsetHeight/2+window.innerHeight/2)+"px",t.style.transform="scale("+e+")"}(e)}))})),e.$$set=e=>{"size"in e&&n(0,o=e.size),"type"in e&&n(11,a=e.type)},[o,l,f,u,r,s,["top","bottom","left","right"],function(e){let t=e.offsetX-d.x,o=e.offsetY-d.y;c.start&&console.log(e),f&&(n(2,f.style.left=`${t}px`,f),n(2,f.style.top=`${o}px`,f)),e.preventDefault()},function(e){let t=e.dataTransfer.getData("nodeName");t&&n(1,l=[...l,{name:t,x:e.layerX,y:e.layerY,center:!0}]),n(2,f=null),e.preventDefault()},function(){n(2,f.style.zIndex=1,f),n(2,f=null),c.start=!1,c.points=[]},function(e){n(2,f=e.detail.el)},a,["nodes","sequence"],function(e){_[e?"unshift":"push"]((()=>{u=e,n(3,u)}))}]}class ye extends B{constructor(e){super(),W(this,e,me,de,l,{size:0,type:11,panelTypes:12})}get panelTypes(){return this.$$.ctx[12]}}function $e(t){let n,r,l,s,u,d,h,y,v,x;return l=new ye({}),u=new ye({}),h=new ye({props:{type:1}}),{c(){n=f("main"),r=f("div"),X(l.$$.fragment),s=p(),X(u.$$.fragment),d=p(),X(h.$$.fragment),$(r,"flex","1"),$(r,"flex-direction","row"),$(r,"display","flex"),$(r,"height","50%"),$(r,"box-sizing","border-box"),$(r,"border-bottom","2px solid"),m(n,"id","main"),m(n,"class","svelte-16hw91i")},m(e,t){c(e,n,t),i(n,r),O(l,r,null),i(r,s),O(u,r,null),i(n,d),O(h,n,null),y=!0,v||(x=[g(n,"drop",ve),g(n,"dragover",xe)],v=!0)},p:e,i(e){y||(Y(l.$$.fragment,e),Y(u.$$.fragment,e),Y(h.$$.fragment,e),y=!0)},o(e){H(l.$$.fragment,e),H(u.$$.fragment,e),H(h.$$.fragment,e),y=!1},d(e){e&&a(n),q(l),q(u),q(h),v=!1,o(x)}}}function ve(e){e.preventDefault()}function xe(e){e.preventDefault()}function be(e){return w((()=>{document.addEventListener("contextmenu",(e=>(e.preventDefault(),!1)))})),[]}return new class extends B{constructor(e){super(),W(this,e,be,$e,l,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
